# ๐ก๏ธ Analytical-Intelligence v1 - ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุญุฏุงุซ ุงูุฃูููุฉ ุงููุตุบุฑ

> ูุธุงู ai ุงุญุชุฑุงูู ูุตุบุฑ ูุน ูุดู ุงููุฌูุงุช ูู ุงูููุช ุงูุญูููู ุจุงุณุชุฎุฏุงู Suricata + ููุงุฐุฌ ุชุนูู ุงูุขูุฉ

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

Analytical-Intelligence ูู ูุธุงู ูุดู ุงูุชูุฏูุฏุงุช ุงูุฃูููุฉ ูู ุงูููุช ุงูุญูููู ูุชููู ูู:

| ุงููููู | ุงููุธููุฉ | ุฒูู ุงูุงุณุชุฌุงุจุฉ |
|--------|---------|---------------|
| **Suricata IDS** | ูุดู ุงููุฌูุงุช ุจุงูุชูููุนุงุช (ุฃุณุงุณู) | ~1 ุซุงููุฉ |
| **SSH LSTM** | ูุดู ูุญุงููุงุช ุงูุงุฎุชุฑุงู ุนุจุฑ SSH | 1-3 ุซูุงูู |
| **Network ML** | ุชุตููู ุญุฑูุฉ ุงูุดุจูุฉ (ุซุงููู) | 2-8 ุซูุงูู |

---

## ๐๏ธ ูููู ุงููุธุงู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ (Sensor)                      โ
โ                  <SENSOR_IP> (ูููุชุดู ุชููุงุฆูุงู)                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โauth_collectorโ  โ suricata โ  โ    flow_collector        โ   โ
โ  โ(tail auth.log)โ โ(AF_PACKET)โ  โ     (NFStream)           โ   โ
โ  โโโโโโโโฌโโโโโโโ  โโโโโโฌโโโโโโ  โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ   โ
โ         โ              โ                    โ                   โ
โ         โ        โโโโโโโดโโโโโโโ             โ                   โ
โ         โ        โsuricata_   โ             โ                   โ
โ         โ        โshipper     โ             โ                   โ
โ         โ        โโโโโโโฌโโโโโโโ             โ                   โ
โโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโ
          โ              โ                   โ
          โ   POST /api/v1/ingest/* (INGEST_API_KEY)
          โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ุฎุงุฏู ุงูุชุญููู (Analysis)                      โ
โ                  <ANALYZER_IP>:8000                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ                    Backend (FastAPI)                      โ  โ
โ  โ  โโโโโโโโโโโโ   โโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโ      โ  โ
โ  โ  โSSH LSTM  โ   โ Suricata โ   โ   Network ML     โ      โ  โ
โ  โ  โDetector  โ   โ Processorโ   โ   Classifier     โ      โ  โ
โ  โ  โโโโโโโโโโโโ   โโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโ      โ  โ
โ  โ                                                           โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ  โ
โ  โ  โ          UI (Jinja2 + CSS + JavaScript)           โ   โ  โ
โ  โ  โ   Dashboard | Alerts | Events | Models            โ   โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                 โผ                               โ
โ               โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ               โ         PostgreSQL           โ                 โ
โ               โ   raw_events | detections    โ                 โ
โ               โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

> [!NOTE]
> `<SENSOR_IP>` ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู ูู `NET_IFACE` - ูุง ุชุญุชุงุฌ ุชุนูููู!

---

## ๐ก ุฎุทุฉ ุงูุดุจูุฉ ูุงูููุงูุฐ

| ุงูุฎุงุฏู | ุงูุนููุงู | ุงููููุฐ | ุงููุตู |
|--------|---------|--------|-------|
| Analysis | `<ANALYZER_IP>` | 8000/tcp | ูุงุฌูุฉ ุงูููุจ + API |
| Sensor | `<ูููุชุดู ุชููุงุฆูุงู>` | - | (ูุง ููุงูุฐ ูุงุฑุฏุฉ) |
| PostgreSQL | ุฏุงุฎูู ููุท | 5432 | **ุบูุฑ ููุดูู ููุฎุงุฑุฌ** |

> [!TIP]
> **ุงููุทููุจ ููู ููุท:** ุชุนููู `ANALYZER_HOST` ูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ. ุจุงูู ุงูู IPs ุชููุชุดู ุชููุงุฆูุงู!

### ๐ฅ ุฅุนุฏุงุฏ ุฌุฏุงุฑ ุงูุญูุงูุฉ (UFW)

```bash
# (ููู) ูุจู ุชูุนูู UFW ุงุณูุญ ุจุงูู SSH ุญุชู ูุง ุชููุทุน ุนููู ุงูุฅุฏุงุฑุฉ
sudo ufw allow 22/tcp

# ุงูุณูุงุญ ููู Sensor (ุงุณุชุจุฏู ุจุงูู IP ุงููุนูู)
sudo ufw allow from <SENSOR_IP> to any port 8000 proto tcp

# ุงูุณูุงุญ ูุฌูุงุฒู (Windows) ููุชุญ ุงูุฏุงุดุจูุฑุฏ
sudo ufw allow from <YOUR_WINDOWS_IP> to any port 8000 proto tcp

# ููุน ุฃู ุฃุญุฏ ุบูุฑูู
sudo ufw deny 8000/tcp

# ุชูุนูู + ุชุญูู
sudo ufw enable
sudo ufw status numbered
```

---

## โก ุงูุชุซุจูุช ูุงูุชุดุบูู

### ๐ ูุฑุญูุฉ ูุง ูุจู ุงูุชุซุจูุช (Pre-Installation Checklist)

> [!IMPORTANT]
> **ุชุฃูุฏ ูู ุฅููุงู ูู ูุฐู ุงูุฎุทูุงุช ูุจู ุงูุจุฏุก ูู ุงูุชุซุจูุช!**

#### 1๏ธโฃ ูุชุทูุจุงุช ุงูุฃุฌูุฒุฉ (Hardware)

| ุงูุฎุงุฏู | RAM | CPU | ุชุฎุฒูู | ููุงุญุธุงุช |
|--------|-----|-----|-------|---------|
| **Analysis** | 4GB+ | 2 cores+ | 20GB+ | ูุญุชูุธ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูููุงุฐุฌ |
| **Sensor** | 2GB+ | 2 cores+ | 10GB+ | ูุดุบู Suricata + NFStream |

#### 2๏ธโฃ ูุชุทูุจุงุช ุงูุจุฑูุฌูุงุช (Software)

| ุงููุชุทูุจ | ุงูุญุฏ ุงูุฃุฏูู | ุงูุชุญูู |
|---------|-------------|--------|
| ูุธุงู ุงูุชุดุบูู | Ubuntu 22.04 / Debian 11 / Kali | `cat /etc/os-release` |
| Docker | 20.10+ | `docker --version` |
| Docker Compose | v2.0+ | `docker compose version` |
| Git | ุฃู ุฅุตุฏุงุฑ | `git --version` |
| curl | ุฃู ุฅุตุฏุงุฑ | `curl --version` |

#### 3๏ธโฃ ูุชุทูุจุงุช ุงูุดุจูุฉ (Network)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         ุดุจูุชู ุงููุญููุฉ                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                             โ
โ   โโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโ              โ
โ   โ Analysis      โโโโโโโโโโโ Sensor        โ              โ
โ   โ Server        โ  TCP    โ Server        โ              โ
โ   โ :8000         โ  8000   โ               โ              โ
โ   โโโโโโโโโฌโโโโโโโโ         โโโโโโโโโโโโโโโโโ              โ
โ           โ                                                 โ
โ           โ TCP 8000                                        โ
โ           โผ                                                 โ
โ   โโโโโโโโโโโโโโโโโ                                        โ
โ   โ ุฌูุงุฒู Windows โ                                        โ
โ   โ (Dashboard)   โ                                        โ
โ   โโโโโโโโโโโโโโโโโ                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูุชุญูู ูู ุงูุงุชุตุงู:**
```bash
# ูู Sensor ุฅูู Analysis
ping <ANALYZER_IP>

# ูู Windows ุฅูู Analysis  
ping <ANALYZER_IP>
```

#### 4๏ธโฃ ูุนูููุงุช ุชุญุชุงุฌ ุชุณุฌูููุง (ุงูุชุจูุง ูุจู ุงูุจุฏุก!)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ูุนูููุงุช ุงูุชุซุจูุช - ุงุญุชูุธ ุจูุง!                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ                                                               โ
โ  Analysis Server IP: _________________ (ูุซุงู: 192.168.1.20)   โ
โ                                                               โ
โ  Sensor Server IP:   _________________ (ูููุชุดู ุชููุงุฆูุงู)       โ
โ                                                               โ
โ  Network Interface:  _________________ (ูุซุงู: ens33, eth0)    โ
โ                                                               โ
โ  INGEST_API_KEY:     _________________ (ุฃูุดุฆ ููุชุงุญ ุขูู)       โ
โ                                                               โ
โ  Gateway IP:         _________________ (ูุซุงู: 192.168.1.1)    โ
โ                                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ููู ุชุญุตู ุนูู ูุฐู ุงููุนูููุงุช:**
```bash
# ูุนุฑูุฉ IP ุงูุญุงูู
ip addr show

# ูุนุฑูุฉ ุงุณู ูุงุฌูุฉ ุงูุดุจูุฉ ุงููุดุทุฉ
ip link show | grep "state UP"

# ูุนุฑูุฉ Gateway
ip route | grep default

# ุฅูุดุงุก API Key ุขูู
openssl rand -hex 32
```

#### 5๏ธโฃ ุชุฌููุฒุงุช ุนูู ูู ุฎุงุฏู (ูุจู ุงูุชุซุจูุช)

**ุนูู ููุง ุงูุฎุงุฏููู:**
```bash
# 1. ุชุญุฏูุซ ุงููุธุงู
sudo apt update && sudo apt upgrade -y

# 2. ุชุซุจูุช ุงูุฃุฏูุงุช ุงูุฃุณุงุณูุฉ
sudo apt install -y curl git nano net-tools

# 3. ุชุซุจูุช Docker
curl -fsSL https://get.docker.com | sudo sh

# 4. ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุฌููุนุฉ Docker
sudo usermod -aG docker $USER

# 5. ุชุณุฌูู ุฎุฑูุฌ ูุฏุฎูู ุฃู:
newgrp docker

# 6. ุงูุชุญูู
docker --version
docker compose version
```

#### 6๏ธโฃ ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ ุงูููุงุฆูุฉ

- [ ] Analysis Server ูุนูู ููุญุฏูุซ
- [ ] Sensor Server ูุนูู ููุญุฏูุซ
- [ ] Docker ูุซุจุช ุนูู ููุง ุงูุฎุงุฏููู
- [ ] ุงูุฎุงุฏููู ุนูู ููุณ ุงูุดุจูุฉ ูููููููุง ุงูุชูุงุตู
- [ ] ุญุตูุช ุนูู IP ูุฎุงุฏู ุงูุชุญููู
- [ ] ุนุฑูุช ุงุณู ูุงุฌูุฉ ุงูุดุจูุฉ ุนูู Sensor
- [ ] ุฃูุดุฃุช INGEST_API_KEY (ุฃู ุณุชุณุชุฎุฏู ุงูุงูุชุฑุงุถู ููุงุฎุชุจุงุฑ)
- [ ] ุฌูุงุฒ Windows ุนูู ููุณ ุงูุดุจูุฉ (ูููุตูู ููู Dashboard)

> [!TIP]
> **ูุตูุญุฉ:** ุงุจุฏุฃ ุจู Analysis Server ุฃููุงูุ ุซู Sensor Server. ูุฐุง ูุถูู ุฃู ุงูู Sensor ูุฌุฏ ุงูุฎุงุฏู ุฌุงูุฒุงู.

---

### ุงููุชุทูุจุงุช ุงูุชูููุฉ

- Docker 20.10+
- Docker Compose v2+
- ูุธุงู Linux (Ubuntu/Debian/Kali) ููุงุณุชุดุนุงุฑ
- ูุงุฌูุฉ ุงูุดุจูุฉ `ens33` (ุฃู ุบูุฑูุง - ูุงุจู ููุชุบููุฑ)

---

### ๐ 1. ุฅุนุฏุงุฏ ุฎุงุฏู ุงูุชุญููู (Analysis Server)

```bash
# 1. ุชุซุจูุช Docker
curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker $USER

# 2. ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/Amr204/Analytical-Intelligence.git Analytical-Intelligence
cd Analytical-Intelligence

# 3. ุตูุงุญูุงุช ุณูุฑุจุชุงุช ุงูุชุดุบูู
chmod +x scripts/*.sh

# 4. ุฅูุดุงุก ููู .env (ุงุฎุชูุงุฑู - ูุชุบููุฑ API Key)
cp .env.example .env
nano .env  # ุชุนุฏูู INGEST_API_KEY

# 5. ุชุดุบูู ุงููุธุงู (ุฃูุถู ุฎูุงุฑ: ุณูุฑุจุช ุฌุงูุฒ)
bash scripts/analysis_up.sh

# ุจุฏูู (ูุฏูู):
# docker compose -f docker-compose.analysis.yml up -d --build
# ุงูุชุธุงุฑ ุงูุชุดุบูู (30 ุซุงููุฉ ุชูุฑูุจุงู)
# sleep 30

# 6. ุงูุชุญูู ูู ุงูุตุญุฉ
curl http://localhost:8000/api/v1/health

# 7. ูุชุญ ุงููุงุฌูุฉ (ุงุณุชุจุฏู ุจุงูู IP ุงููุนูู ูุฎุงุฏู ุงูุชุญููู)
# ูู ุงููุชุตูุญ: http://<ANALYZER_IP>:8000
```

---

### ๐ 2. ุฅุนุฏุงุฏ ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ (Sensor Server)

```bash
# 1. ุชุซุจูุช Docker
curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker $USER

# (ููู) ุทุจูู ุตูุงุญูุฉ ูุฌููุนุฉ docker ุจุฏูู ุชุณุฌูู ุฎุฑูุฌ
newgrp docker

# 2. ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/Amr204/Analytical-Intelligence.git Analytical-Intelligence
cd Analytical-Intelligence

# 3. ุตูุงุญูุงุช ุณูุฑุจุชุงุช ุงูุชุดุบูู
chmod +x scripts/*.sh

# 4. ุงูุชุญูู ูู ุงุณู ูุงุฌูุฉ ุงูุดุจูุฉ
ip link show
# ูุซุงู: ens33, eth0, enp0s3

# 5. ุฅูุดุงุก ููู .env
# โก ุงูุฌุฏูุฏ: DEVICE_IP ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู ูู NET_IFACE!
cat > .env << 'EOF'
# ุนููุงู ุฎุงุฏู ุงูุชุญููู (IP ููุท ุจุฏูู http://)
ANALYZER_HOST=<ANALYZER_IP>

# ููุชุงุญ API (ูุฌุจ ุฃู ูุชุทุงุจู ูุน Analysis server)
INGEST_API_KEY=ONuMcisin3paJYkPDaf0tt9n2deEBeaN

# ูุงุฌูุฉ ุงูุดุจูุฉ ููุงูุชูุงุท
NET_IFACE=ens33

# ูุนุฑู ุงูุฌูุงุฒ
DEVICE_ID=sensor-01
HOSTNAME=sensor-server

# DEVICE_IP ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู! (ูุง ุญุงุฌุฉ ูุชุนูููู)
# DEVICE_IP=    # ููุท ุฅุฐุง ูุดู ุงูุงูุชุดุงู ุงูุชููุงุฆู
EOF

# 6. ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุฎุงุฏู ุงูุชุญููู
ping -c 3 <ANALYZER_IP>
curl http://<ANALYZER_IP>:8000/api/v1/health

# 7. ุชุดุบูู ุงููุธุงู (ุฃูุถู ุฎูุงุฑ: ุณูุฑุจุช ุฌุงูุฒ)
bash scripts/sensor_up.sh

# ุจุฏูู (ูุฏูู):
# docker compose -f docker-compose.sensor.yml up -d --build

# 8. ูุฑุงูุจุฉ ุงูุณุฌูุงุช
docker compose -f docker-compose.sensor.yml logs -f
```

---

## โ ุงูุชุญูู ูู ุงูุชุดุบูู

### 1. ูุญุต ุงูู Health

```bash
curl -s http://<ANALYZER_IP>:8000/api/v1/health | jq
# ุงููุชููุน: {"status":"ok","timestamp":"...","version":"1.0.0"}
```

### 2. ุฅุฑุณุงู ุฃุญุฏุงุซ ุชุฌุฑูุจูุฉ

```bash
cd Analytical-Intelligence

# ุฅุฑุณุงู 10 ุฃุญุฏุงุซ ูู ูู ููุน
python scripts/sample_sender.py \
  --url http://<ANALYZER_IP>:8000 \
  --api-key <INGEST_API_KEY> \
  --count 10

# ุฅุฑุณุงู ุฃุญุฏุงุซ SSH ููุท
python scripts/sample_sender.py --type auth --count 20

# ุฅุฑุณุงู ุฃุญุฏุงุซ Suricata ููุท
python scripts/sample_sender.py --type suricata --count 20
```

### 3. ูุฑุงูุจุฉ ุชูุจููุงุช Suricata

```bash
# ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ
tail -f data/suricata/eve.json | jq '.alert.signature // empty'
```

### 4. ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุนูู ุฎุงุฏู ุงูุชุญููู
docker exec -it ai_db-postgres psql -U ai -d ai_db

-- ุนุฏุฏ ุงูุฃุญุฏุงุซ
SELECT event_type, COUNT(*) FROM raw_events GROUP BY event_type;

-- ุนุฏุฏ ุงูุชูุจููุงุช
SELECT model_name, severity, COUNT(*) FROM detections GROUP BY model_name, severity;

-- ุขุฎุฑ 10 ุชูุจููุงุช
SELECT ts, model_name, label, severity FROM detections ORDER BY ts DESC LIMIT 10;

\q
```

---

## ๐ฌ ุณููุงุฑูู ูุงูู: ูู ุงูุตูุฑ ุฅูู ุฑุคูุฉ ุงูุชูุจููุงุช

> [!NOTE]
> **ูุฐุง ุงูุณููุงุฑูู ุดุงูู ุฎุทูุฉ ุจุฎุทูุฉ** - ุงุชุจุนู ุจุงูุชุฑุชูุจ ูู ุงูุจุฏุงูุฉ ููููุงูุฉ ูุชุดุบูู ุงููุธุงู ูุฑุคูุฉ ุงูุชูุจููุงุช ูู ููุญุฉ ุงูุชุญูู.

### ๐ ุงููุชุทูุจุงุช ุงูุฃูููุฉ

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู ุชููุฑ:

| ุงููุชุทูุจ | ุงูุชูุงุตูู |
|---------|----------|
| **ุฎุงุฏููู** | Analysis + Sensor (ุนูู ููุณ ุงูุดุจูุฉ) |
| **ูุธุงู ุงูุชุดุบูู** | Ubuntu 22.04 LTS ุฃู Kali Linux |
| **ุงูุงุชุตุงู** | ุงูุฎุงุฏููู ุนูู ููุณ ุงูุดุจูุฉ ูููููููุง ุงูุชูุงุตู |
| **ุตูุงุญูุงุช** | ูุตูู root ุฃู sudo |
| **ุงูููุงุฑุฏ** | RAM: 4GB+ ููู ุฎุงุฏูุ ูุณุงุญุฉ: 20GB+ |

---

### ๐ฅ๏ธ ุงููุฑุญูุฉ 1: ุชุฌููุฒ ุฎุงุฏู ุงูุชุญููู (Analysis Server)

> **ุงูุฎุงุฏู:** ุชุญุฏูุฏ ุงูู IP ุงูุฎุงุต ุจู ุจุนุฏ ุชุนููู ุงูุดุจูุฉ
> **ุงููุฏุฉ ุงููุชููุนุฉ:** 10-15 ุฏูููุฉ

#### ุงูุฎุทูุฉ 1.1: ุชุนููู IP ุซุงุจุช

```bash
# ุชุญุฑูุฑ ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ
sudo nano /etc/netplan/00-installer-config.yaml
```

ุฃุถู ุงููุญุชูู ุงูุชุงูู:

```yaml
network:
  version: 2
  ethernets:
    ens33:          # ุบููุฑ ุญุณุจ ูุงุฌูุชู
      dhcp4: no
      addresses:
        - <ุงุฎุชุฑ IP ูุฎุงุฏู ุงูุชุญููู>/24
      gateway4: <ุงูู Gateway ุงูุฎุงุต ุจุดุจูุชู>
      nameservers:
        addresses:
          - 8.8.8.8
          - 8.8.4.4
```

```bash
# ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช
sudo netplan apply

# ุงูุชุญูู - ุณุฌูู ุงูู IP ุงูุฐู ุชุฑุงู
ip addr show
```

#### ุงูุฎุทูุฉ 1.2: ุชุซุจูุช Docker

```bash
# ุชุญุฏูุซ ุงููุธุงู
sudo apt update && sudo apt upgrade -y

# ุชุซุจูุช Docker
curl -fsSL https://get.docker.com | sudo sh

# ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุฌููุนุฉ Docker
sudo usermod -aG docker $USER

# ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู (ููู!)
exit
# ุซู ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

# ุงูุชุญูู
docker --version
# ุงููุชููุน: Docker version 24.x.x ุฃู ุฃุญุฏุซ

docker compose version
# ุงููุชููุน: Docker Compose version v2.x.x
```

#### ุงูุฎุทูุฉ 1.3: ุชุญููู ุงููุดุฑูุน

```bash
# ุงูุงูุชูุงู ูููุฌูุฏ ุงูุฑุฆูุณู
cd ~

# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/Amr204/Analytical-Intelligence.git

# ุงูุฏุฎูู ูููุดุฑูุน
cd Analytical-Intelligence

# ุงูุชุญูู ูู ุงููููุงุช
ls -la
# ูุฌุจ ุฃู ุชุฑู: docker-compose.analysis.yml, README.md, services/, agents/, etc.
```

#### ุงูุฎุทูุฉ 1.4: ุงูุชุญูู ูู ุงูููุงุฐุฌ

```bash
# ุงูุชุญูู ูู ูุฌูุฏ ุงูููุงุฐุฌ
ls -la models/ssh/
# ุงููุชููุน: ssh_lstm.joblib

ls -la models/network/
# ุงููุชููุน: model.joblib, feature_list.json, label_map.json, preprocess_config.json

# ุฅุฐุง ูุงูุช ุงูููุงุฐุฌ ุบูุฑ ููุฌูุฏุฉ - ุงูุณุฎูุง ูู ุงููุฌูุฏุงุช ุงูุฃุตููุฉ
# cp models/Host-Model/ssh_lstm.joblib models/ssh/
# cp models/Network-Model/* models/network/
```

#### ุงูุฎุทูุฉ 1.5: ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ

```bash
# ูุณุฎ ููู ุงูุจูุฆุฉ ุงููููุฐุฌู
cp .env.example .env

# ุชุนุฏูู ุงูููู (ุงุฎุชูุงุฑู - ููุชุฎุตูุต)
nano .env
```

**ุงููุญุชูู ุงูููู ูู .env:**
```bash
# ููุชุงุญ API - ุบููุฑู ูู ุงูุฅูุชุงุฌ!
INGEST_API_KEY=ONuMcisin3paJYkPDaf0tt9n2deEBeaN

# ูุงุนุฏุฉ ุงูุจูุงูุงุช
POSTGRES_USER=ai
POSTGRES_PASSWORD=ai2025
POSTGRES_DB=ai_db
```

#### ุงูุฎุทูุฉ 1.6: ุชุดุบูู Analysis Stack

```bash
# ุจูุงุก ูุชุดุบูู ุงูุญุงููุงุช
docker compose -f docker-compose.analysis.yml up -d --build

# ูุฑุงูุจุฉ ุนูููุฉ ุงูุจูุงุก (ุฃูู ูุฑุฉ ุชุฃุฎุฐ 5-10 ุฏูุงุฆู)
docker compose -f docker-compose.analysis.yml logs -f

# ุงุถุบุท Ctrl+C ููุฎุฑูุฌ ูู ุงูุณุฌูุงุช
```

#### ุงูุฎุทูุฉ 1.7: ุงูุชุญูู ูู ุงูุชุดุบูู

```bash
# ุงูุชุธุฑ 30 ุซุงููุฉ
sleep 30

# ุชุญูู ูู ุญุงูุฉ ุงูุญุงููุงุช
docker ps
# ูุฌุจ ุฃู ุชุฑู: ai_db-backend ู ai_db-postgres ุจุญุงูุฉ "Up"

# ูุญุต ุตุญุฉ ุงูู Backend
curl -s http://localhost:8000/api/v1/health | jq
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "status": "ok",
  "timestamp": "2026-01-12T17:30:00.000000Z",
  "version": "1.0.0"
}
```

#### ุงูุฎุทูุฉ 1.8: ูุชุญ ููุญุฉ ุงูุชุญูู

```bash
# ูู ุฌูุงุฒู ุงูุดุฎุตูุ ุงูุชุญ ุงููุชุตูุญ ูุฒุฑ:
# http://<ANALYZER_IP>:8000

# ุฃู ูู ููุณ ุงูุฎุงุฏู:
curl http://localhost:8000 | head -20
```

**โ ุงููุฑุญูุฉ 1 ููุชููุฉ!** - ููุญุฉ ุงูุชุญูู ุชุนููุ ููู ุจุฏูู ุจูุงูุงุช ุญุชู ุงูุขู.

---

### ๐ ุงููุฑุญูุฉ 2: ุชุฌููุฒ ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ (Sensor Server)

> **ุงูุฎุงุฏู:** DEVICE_IP ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู ูู NET_IFACE
> **ุงููุฏุฉ ุงููุชููุนุฉ:** 10-15 ุฏูููุฉ

#### ุงูุฎุทูุฉ 2.1: ุชุนููู IP ุซุงุจุช

```bash
sudo nano /etc/netplan/00-installer-config.yaml
```

```yaml
network:
  version: 2
  ethernets:
    ens33:
      dhcp4: no
      addresses:
        - <ูููุชุดู ุชููุงุฆูุงู - ุฃู ุงุฎุชุฑ IP>/24
      gateway4: <ุงูู Gateway>
      nameservers:
        addresses:
          - 8.8.8.8
```

```bash
sudo netplan apply
ip addr show  # ูุงุญุธ ุงูู IP ุงููุนูููู (ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู)
```

#### ุงูุฎุทูุฉ 2.2: ุชุซุจูุช Docker

```bash
sudo apt update && sudo apt upgrade -y
curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker $USER
exit
# ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
```

#### ุงูุฎุทูุฉ 2.3: ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุฎุงุฏู ุงูุชุญููู

```bash
# ุงุฎุชุจุงุฑ ุงูู ping (ุงุณุชุจุฏู ุจุงูู IP ุงููุนูู ูุฎุงุฏู ุงูุชุญููู)
ping -c 4 <ANALYZER_IP>
# ูุฌุจ ุฃู ุชุฑู ุฑุฏูุฏ ูุงุฌุญุฉ

# ุงุฎุชุจุงุฑ ุงูู API
curl -s http://<ANALYZER_IP>:8000/api/v1/health
# ูุฌุจ ุฃู ุชุฑู: {"status":"ok"...}
```

> [!WARNING]
> **ุฅุฐุง ูุดู ุงูุงุชุตุงู:**
> - ุชุฃูุฏ ูู ุฌุฏุงุฑ ุงูุญูุงูุฉ ุนูู ุฎุงุฏู ุงูุชุญููู
> - ุชุฃูุฏ ุฃู ุงูุฎุงุฏููู ุนูู ููุณ ุงูุดุจูุฉ
> - ุฌุฑุจ: `sudo ufw allow 8000` ุนูู ุฎุงุฏู ุงูุชุญููู

#### ุงูุฎุทูุฉ 2.4: ุชุญููู ุงููุดุฑูุน

```bash
cd ~
git clone https://github.com/Amr204/Analytical-Intelligence.git
cd Analytical-Intelligence
```

#### ุงูุฎุทูุฉ 2.5: ุชุญุฏูุฏ ูุงุฌูุฉ ุงูุดุจูุฉ

```bash
# ุนุฑุถ ุงููุงุฌูุงุช ุงููุชุงุญุฉ
ip link show

# ุงุจุญุซ ุนู ุงููุงุฌูุฉ ุงููุดุทุฉ (ุนุงุฏุฉ ens33 ุฃู eth0 ุฃู enp0s3)
# ุณุฌูู ุงุณู ุงููุงุฌูุฉ ูุงุณุชุฎุฏุงูู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ
```

**ูุซุงู ุงูุฎุฑุฌ:**
```
1: lo: <LOOPBACK,UP,LOWER_UP> ...
2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> ...  โ ูุฐู ุงููุงุฌูุฉ
```

#### ุงูุฎุทูุฉ 2.6: ุฅูุดุงุก ููู ุงูุจูุฆุฉ

```bash
# ุงุณุชุจุฏู ุงูููู ุญุณุจ ุจูุฆุชู
cat > .env << 'EOF'
ANALYZER_HOST=<ANALYZER_IP>
ANALYZER_PORT=8000
INGEST_API_KEY=ONuMcisin3paJYkPDaf0tt9n2deEBeaN
DEVICE_ID=sensor-01
HOSTNAME=sensor-server
NET_IFACE=ens33
EOF

# ุงูุชุญูู
cat .env
```

> [!TIP]
> **ุงูุฌุฏูุฏ:** ูุง ุญุงุฌุฉ ูุชุนููู `DEVICE_IP` - ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู ูู ูุงุฌูุฉ ุงูุดุจูุฉ!

#### ุงูุฎุทูุฉ 2.7: ุฅุนุฏุงุฏ ูุฌูุฏ Suricata

```bash
# ุฅูุดุงุก ูุฌูุฏ ุงูุณุฌูุงุช
mkdir -p data/suricata

# ุงูุชุญูู
ls -la data/
```

#### ุงูุฎุทูุฉ 2.8: ุชุดุบูู Sensor Stack

```bash
# ุจูุงุก ูุชุดุบูู ุงูุญุงููุงุช
docker compose -f docker-compose.sensor.yml up -d --build

# ุงูุจูุงุก ุงูุฃูู ูุฃุฎุฐ 5-10 ุฏูุงุฆู
# ูุฑุงูุจุฉ ุงูุนูููุฉ:
docker compose -f docker-compose.sensor.yml logs -f

# ุงุถุบุท Ctrl+C ููุฎุฑูุฌ
```

#### ุงูุฎุทูุฉ 2.9: ุงูุชุญูู ูู ุงูุชุดุบูู

```bash
# ุงูุชุธุฑ ุฏูููุฉ
sleep 60

# ุชุญูู ูู ุญุงูุฉ ุงูุญุงููุงุช
docker ps
```

**ูุฌุจ ุฃู ุชุฑู 4 ุญุงููุงุช:**
```
CONTAINER ID   IMAGE                    STATUS         NAMES
xxxx           ai_db-auth-collector  Up 2 minutes   ai_db-auth-collector
xxxx           ai_db-suricata        Up 2 minutes   ai_db-suricata
xxxx           ai_db-suricata-ship   Up 2 minutes   ai_db-suricata-shipper
xxxx           ai_db-flow-collector  Up 2 minutes   ai_db-flow-collector
```

#### ุงูุฎุทูุฉ 2.10: ุงูุชุญูู ูู ุนูู Suricata

```bash
# ุชุญูู ูู ุฅูุดุงุก ููู eve.json
ls -la data/suricata/
# ูุฌุจ ุฃู ุชุฑู: eve.json (ูุฏ ูููู ูุงุฑุบุงู ูู ุงูุจุฏุงูุฉ)

# ูุฑุงูุจุฉ ุณุฌูุงุช Suricata
docker logs ai_db-suricata 2>&1 | tail -20
# ุงุจุญุซ ุนู: "All AFP capture threads running"
```

**โ ุงููุฑุญูุฉ 2 ููุชููุฉ!** - ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ ูุนูู ููุฑุณู ุงูุจูุงูุงุช.

---

### ๐งช ุงููุฑุญูุฉ 3: ุชูููุฏ ุญุฑูุฉ ูุฑูุฑ ูุงุฎุชุจุงุฑ ุงููุดู

> **ุงููุฏุฉ ุงููุชููุนุฉ:** 5-10 ุฏูุงุฆู

#### ุงูุฎุทูุฉ 3.1: ุฅุฑุณุงู ุฃุญุฏุงุซ ุชุฌุฑูุจูุฉ (ูู ุฃู ุฎุงุฏู)

```bash
cd ~/Analytical-Intelligence

# ุชุซุจูุช Python requests ุฅุฐุง ูู ููู ููุฌูุฏุงู
pip3 install requests

# ุฅุฑุณุงู ุฃุญุฏุงุซ ุชุฌุฑูุจูุฉ ูุฎุชูุทุฉ
python3 scripts/sample_sender.py \
  --url http://<ANALYZER_IP>:8000 \
  --api-key test-api-key-12345 \
  --count 20 \
  --type all
```

**ุงูุฎุฑุฌ ุงููุชููุน:**
```
Sending 20 events to http://<ANALYZER_IP>:8000
Event type: all
--------------------------------------------------
[1/20] AUTH:     Status=200
[1/20] SURICATA: Status=200
[1/20] FLOW:     Status=200
[2/20] AUTH:     Status=200
...
--------------------------------------------------
Done!
```

#### ุงูุฎุทูุฉ 3.2: ุชูููุฏ ุญุฑูุฉ ุดุจูุฉ ุญููููุฉ (ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ)

```bash
# ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ - ุชูููุฏ ุญุฑูุฉ HTTP
curl -s http://example.com > /dev/null
curl -s http://google.com > /dev/null

# ุชูููุฏ DNS queries
nslookup google.com
nslookup facebook.com

# ping ูุนูุงููู ูุฎุชููุฉ
ping -c 3 8.8.8.8
ping -c 3 1.1.1.1
```

#### ุงูุฎุทูุฉ 3.3: ูุญุงูุงุฉ ูุฌูู SSH (ุงุฎุชูุงุฑู - ููุงุฎุชุจุงุฑ ููุท)

```bash
# ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ - ูุญุงูุงุฉ ูุญุงููุงุช ูุงุดูุฉ
# ูุฐุง ุณูููุฏ ุชูุจููุงุช SSH
for i in {1..10}; do
  ssh -o ConnectTimeout=2 -o BatchMode=yes fakeuser@localhost 2>/dev/null
done

# ุงูุชุญูู ูู auth.log
sudo tail -5 /var/log/auth.log
```

#### ุงูุฎุทูุฉ 3.4: ุชุดุบูู Nmap (ููุญุตูู ุนูู ุชูุจููุงุช Suricata)

```bash
# ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ - ูุญุต ุงูููุงูุฐ (ุณููููุฏ ุชูุจููุงุช)
sudo apt install nmap -y

# ูุญุต ุฎููู ูุฎุงุฏู ุงูุชุญููู
nmap -sT -T2 <ANALYZER_IP> -p 22,80,443,8000

# ูุญุต ุงูุดุจูุฉ ุงููุญููุฉ (ุณููููุฏ ุงููุฒูุฏ ูู ุงูุชูุจููุงุช)
nmap -sn <NETWORK>/24
```

---

### ๐ ุงููุฑุญูุฉ 4: ุฑุคูุฉ ุงููุชุงุฆุฌ ูู ููุญุฉ ุงูุชุญูู

> **ุงููุฏุฉ ุงููุชููุนุฉ:** 5 ุฏูุงุฆู

#### ุงูุฎุทูุฉ 4.1: ูุชุญ ููุญุฉ ุงูุชุญูู

```
ุงูุชุญ ูู ุงููุชุตูุญ: http://<ANALYZER_IP>:8000
```

#### ุงูุฎุทูุฉ 4.2: ูุง ุณุชุฑุงู ูู Dashboard

**ูุณู ุงูุฅุญุตุงุฆูุงุช (Stats Cards):**
```
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโ
โ Total Eventsโ Total         โ Detections     โ Devices  โ
โ 150         โ Detections 45 โ (24h) 45       โ 1        โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโดโโโโโโโโโโโ
```

**ูุณู ุงูุชูุจููุงุช ุงูุฃุฎูุฑุฉ:**
```
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโ
โ Time             โ Severity โ Model      โ Label                   โ Device    โ
โโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโค
โ 2026-01-12 17:45 โ HIGH     โ suricata   โ ET SCAN Potential SSH   โ sensor-01 โ
โ 2026-01-12 17:44 โ MEDIUM   โ ssh_lstm   โ SSH_BRUTE_FORCE         โ sensor-01 โ
โ 2026-01-12 17:43 โ HIGH     โ network_ml โ PortScan                โ sensor-01 โ
โ 2026-01-12 17:42 โ CRITICAL โ suricata   โ ET DOS Possible NTP DDoSโ sensor-01 โ
โโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโ
```

#### ุงูุฎุทูุฉ 4.3: ุงุณุชูุดุงู ุตูุญุฉ ุงูุชูุจููุงุช

```
ุงูุชูู ุฅูู: http://<ANALYZER_IP>:8000/alerts
```

**ุงูููุงุชุฑ ุงููุชุงุญุฉ:**
- **Severity:** CRITICAL, HIGH, MEDIUM, LOW
- **Model:** suricata, ssh_lstm, network_ml
- **Label Contains:** ุจุญุซ ูุตู
- **Time Range:** ุขุฎุฑ 5 ุฏูุงุฆูุ ุณุงุนุฉุ 24 ุณุงุนุฉ

**ูุซุงู ุชุทุจูู ููุชุฑ:**
```
Severity: HIGH
Model: suricata
โ Apply Filters
```

#### ุงูุฎุทูุฉ 4.4: ุนุฑุถ ุชูุงุตูู ุชูุจูู

1. ุงููุฑ ุนูู ุฒุฑ **View** ุจุฌุงูุจ ุฃู ุชูุจูู
2. ุณุชุธูุฑ ูุงูุฐุฉ ุจุงูุชูุงุตูู ุงููุงููุฉ:

```json
{
  "signature_id": 2001219,
  "signature": "ET SCAN Potential SSH Scan",
  "category": "Attempted Information Leak",
  "src_ip": "192.168.1.10",
  "src_port": 45678,
  "dest_ip": "192.168.1.20",
  "dest_port": 22,
  "proto": "TCP"
}
```

#### ุงูุฎุทูุฉ 4.5: ุงุณุชูุดุงู ุตูุญุงุช ุงูุฃุญุฏุงุซ

**ุฃุญุฏุงุซ SSH:**
```
http://<ANALYZER_IP>:8000/events/auth
```
- ุชุฑู ุณุทูุฑ auth.log ุงูุฎุงู
- ูู ุณุทุฑ ูุญุชูู ุนูู: timestamp, device, log line

**ุฃุญุฏุงุซ ุงูุชุฏูู:**
```
http://<ANALYZER_IP>:8000/events/flows
```
- ุชุฑู ุชุฏููุงุช ุงูุดุจูุฉ
- ุงููุนูููุงุช: src/dst IP:port, protocol, bytes, packets, duration

**ุฃุญุฏุงุซ Suricata:**
```
http://<ANALYZER_IP>:8000/events/suricata
```
- ุชุฑู ุฌููุน ุฃุญุฏุงุซ eve.json
- ุจูุง ูููุง ุงูุชูุจููุงุช ูุงููุนูููุงุช

#### ุงูุฎุทูุฉ 4.6: ุตูุญุฉ ุงูููุงุฐุฌ

```
http://<ANALYZER_IP>:8000/models
```

**ุชุฑู ุญุงูุฉ ุงูููุงุฐุฌ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ SSH LSTM                          [LOADED]   โ
โ Tokens: 12 | Window: 10 | Threshold: 0.5        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ Network ML                        [LOADED]   โ
โ Features: 70 | Classes: 10                      โ
โ Labels: BENIGN, Bot, DDoS, DoS...               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฆ Suricata IDS                      [ACTIVE]   โ
โ Detection: Real-time | Latency: ~1 second       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### โ ุงููุฑุญูุฉ 5: ุงูุชุญูู ุงูููุงุฆู

#### ูุงุฆูุฉ ุงูุชุญูู:

- [ ] ููุญุฉ ุงูุชุญูู ุชุนุฑุถ ุฅุญุตุงุฆูุงุช ูุญุฏุซุฉ
- [ ] ุงูุชูุจููุงุช ุชุธูุฑ ูู ูุณู "Recent Alerts"
- [ ] ุงูููุงุชุฑ ุชุนูู ูู ุตูุญุฉ /alerts
- [ ] ุตูุญุงุช ุงูุฃุญุฏุงุซ ุชุนุฑุถ ุงูุจูุงูุงุช
- [ ] ุตูุญุฉ /models ุชุธูุฑ ุงูููุงุฐุฌ ูู "LOADED"
- [ ] ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู 2 ุซุงููุฉ ูุนูู

#### ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู:

1. ุงูุชุญ Dashboard ูู ุงููุชุตูุญ
2. ูู ุทุฑููุฉ ุฃุฎุฑูุ ุฃุฑุณู ุฃุญุฏุงุซ:
   ```bash
   python3 scripts/sample_sender.py --count 5 --type suricata
   ```
3. ุฑุงูุจ ููุญุฉ ุงูุชุญูู - ุณุชุชุญุฏุซ ุงูุฃุฑูุงู ุฎูุงู 2-4 ุซูุงูู

#### ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```bash
# ุนูู ุฎุงุฏู ุงูุชุญููู
docker exec -it ai_db-postgres psql -U ai -d ai_db -c "
SELECT 
  event_type, 
  COUNT(*) as count 
FROM raw_events 
GROUP BY event_type;
"

# ุงููุชููุน:
#  event_type | count
# ------------+-------
#  auth       |   50
#  suricata   |   30
#  flow       |   70
```

---

### ๐ ุชูุงูููุง!

**ุงููุธุงู ูุนูู ุจูุฌุงุญ!** ุงูุขู ูุฏูู:

1. โ **ุฎุงุฏู ุชุญููู** ูุณุชูุจู ุงูุฃุญุฏุงุซ ููุญูููุง
2. โ **ุฎุงุฏู ุงุณุชุดุนุงุฑ** ูุฌูุน ุงูุจูุงูุงุช ูู ุงูุดุจูุฉ
3. โ **Suricata** ููุดู ุงููุฌูุงุช ูู ุงูููุช ุงูุญูููู
4. โ **ููุงุฐุฌ ML** ุชุตูู ุญุฑูุฉ ุงูุดุจูุฉ
5. โ **ููุญุฉ ุชุญูู** ุชุนุฑุถ ุงูุชูุจููุงุช ูุงูุฅุญุตุงุฆูุงุช

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ุฎุทุฃ 401 Unauthorized

**ุงูุณุจุจ:** ููุชุงุญ API ุบูุฑ ูุชุทุงุจู

**ุงูุญู:**
```bash
# ุชุฃูุฏ ุฃู INGEST_API_KEY ูู ุงูู Sensor = INGEST_API_KEY ูู Analysis
# ุนูู Analysis:
cat .env | grep INGEST_API_KEY

# ุนูู Sensor:
cat .env | grep INGEST_API_KEY
```

### โ ูุงุฌูุฉ ุงูุดุจูุฉ ุบูุฑ ููุฌูุฏุฉ

**ุงูุฎุทุฃ:** `Interface ens33 not found`

**ุงูุญู:**
```bash
# ุงูุชุดู ุงููุงุฌูุฉ ุงูุตุญูุญุฉ
ip link show

# ุนุฏูู .env
nano .env
# ุบููุฑ NET_IFACE=ens33 ุฅูู ุงููุงุฌูุฉ ุงููุนููุฉ

# ุฃุนุฏ ุงูุชุดุบูู
docker compose -f docker-compose.sensor.yml down
docker compose -f docker-compose.sensor.yml up -d
```

### โ Suricata ูุง ููุชุจ eve.json

**ุงูุณุจุจ:** ุตูุงุญูุงุช ุฃู ุฅุนุฏุงุฏุงุช

**ุงูุญู:**
```bash
# ุชุญูู ูู ุงูุณุฌูุงุช
docker logs ai_db-suricata

# ุชุญูู ูู ุงูููู
ls -la data/suricata/

# ุฅุฐุง ูุงู ูุงุฑุบุงู - ุฃุนุฏ ุชุดุบูู
docker compose -f docker-compose.sensor.yml restart suricata
```

### โ ุตูุงุญูุงุช ูุฑุงุกุฉ /var/log/auth.log

**ุงูุฎุทุฃ:** `Permission denied: /var/log/auth.log`

**ุงูุญู:**
```bash
# ุนูู ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ
sudo chmod 644 /var/log/auth.log

# ุฃู ุฃุถู ุงููุณุชุฎุฏู ูููุฌููุนุฉ
sudo usermod -aG adm $USER
```

### โ ูุดุงูู VMware/VirtualBox

**ุฅุฐุง ูุงู ุงูุฎุงุฏู ุงูุชุฑุงุถูุงู:**
```bash
# ุชุฃูุฏ ูู ุฃู ุงูุดุจูุฉ Bridged ูููุณ NAT
# ูู VMware: VM Settings > Network Adapter > Bridged

# ุชุฃูุฏ ูู ุชูุนูู Promiscuous Mode
# ูู VirtualBox: Settings > Network > Advanced > Promiscuous Mode: Allow All
```

---

## ๐ ุตูุญุงุช ุงููุงุฌูุฉ

| ุงูุตูุญุฉ | ุงูุฑุงุจุท | ุงููุตู |
|--------|--------|-------|
| ููุญุฉ ุงูุชุญูู | `/` | ุฅุญุตุงุฆูุงุช + ุขุฎุฑ ุงูุชูุจููุงุช |
| ุงูุชูุจููุงุช | `/alerts` | ูุงุฆูุฉ ุงูุชูุจููุงุช ูุน ููุงุชุฑ |
| ุฃุญุฏุงุซ SSH | `/events/auth` | ุณุฌูุงุช auth.log |
| ุฃุญุฏุงุซ ุงูุชุฏูู | `/events/flows` | ุชุฏููุงุช ุงูุดุจูุฉ |
| ุฃุญุฏุงุซ Suricata | `/events/suricata` | ุชูุจููุงุช Suricata |
| ุงูููุงุฐุฌ | `/models` | ุญุงูุฉ ููุงุฐุฌ ML |

---

## โฑ๏ธ ุชุนุฑูู "ุงูููุช ุงูุญูููู"

| ุงููููู | ุฒูู ุงูุงุณุชุฌุงุจุฉ | ุงูุชูุณูุฑ |
|--------|---------------|----------|
| Suricata | ~1 ุซุงููุฉ | ูุดู ููุฑู ุจุงูุชูููุนุงุช |
| SSH LSTM | 1-3 ุซูุงูู | ุชุญููู ููุฑู ููู ุณุทุฑ |
| Network ML | 2-8 ุซูุงูู | ูุนุชูุฏ ุนูู ุงูุชูุงุก ุงูุชุฏูู |
| ุชุญุฏูุซ ุงููุงุฌูุฉ | 2 ุซุงููุฉ | Polling interval |

---

## ๐ ููุงุญุธุงุช ุฃูููุฉ

> [!WARNING]
> **ุชุญุฐูุฑุงุช ูุงูุฉ ููุฅูุชุงุฌ**

1. **ุบููุฑ API Key ุงูุงูุชุฑุงุถู** ูุจู ุงููุดุฑ:
   ```bash
   # ุฅูุดุงุก ููุชุงุญ ุนุดูุงุฆู
   openssl rand -hex 32
   ```

2. **ูุง ุชูุดู PostgreSQL** ููุดุจูุฉ ุงูุฎุงุฑุฌูุฉ (ุงูุฅุนุฏุงุฏ ุงูุญุงูู ุขูู)

3. **ูููุฏ ุงููุตูู ููู Dashboard** ุนุจุฑ:
   - ุฌุฏุงุฑ ุงูุญูุงูุฉ (UFW)
   - ุฃู ุฅุถุงูุฉ ูุตุงุฏูุฉ (ูุณุชูุจูุงู)

4. **ููุฅูุชุงุฌ ุงููุนูู:**
   - ุงุณุชุฎุฏู HTTPS ูุน Nginx reverse proxy
   - ุฃุถู Rate limiting
   - ุฑุงูุจ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ

---

## ๐ ูููู ุงููููุงุช

```
Analytical-Intelligence/
โโโ .env.example                    # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ docker-compose.analysis.yml     # ุฎุงุฏู ุงูุชุญููู
โโโ docker-compose.sensor.yml       # ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ
โโโ README.md                       # ูุฐุง ุงูููู
โ
โโโ scripts/
โ   โโโ init_db.sql                # ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ print_config.sh            # ุทุจุงุนุฉ ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ
โ   โโโ sample_sender.py           # ุฅุฑุณุงู ุฃุญุฏุงุซ ุชุฌุฑูุจูุฉ
โ   โโโ analysis_up.sh             # ุชุดุบูู ุงูุชุญููู
โ   โโโ sensor_up.sh               # ุชุดุบูู ุงูุงุณุชุดุนุงุฑ
โ
โโโ models/
โ   โโโ ssh/                       # ูููุฐุฌ SSH LSTM
โ   โ   โโโ ssh_lstm.joblib
โ   โโโ network/                   # ูููุฐุฌ ML ููุดุจูุฉ
โ       โโโ model.joblib
โ       โโโ feature_list.json
โ       โโโ label_map.json
โ       โโโ preprocess_config.json
โ
โโโ services/
โ   โโโ backend/                   # ุฎุฏูุฉ FastAPI
โ       โโโ Dockerfile
โ       โโโ requirements.txt
โ       โโโ app/
โ           โโโ main.py
โ           โโโ config.py
โ           โโโ db.py
โ           โโโ models_loader.py
โ           โโโ security.py
โ           โโโ schemas.py
โ           โโโ detectors/
โ           โโโ ingest/
โ           โโโ ui/
โ           โโโ templates/
โ           โโโ static/
โ
โโโ agents/
    โโโ common/                     # ุฃุฏูุงุช ูุดุชุฑูุฉ (ip_utils.py)
    โโโ auth_collector/             # ุฌุงูุน ุณุฌูุงุช SSH
    โโโ suricata/                   # ุญุงููุฉ Suricata
    โโโ suricata_shipper/           # ุดุงุญู ุชูุจููุงุช Suricata
    โโโ flow_collector/             # ุฌุงูุน ุชุฏููุงุช ุงูุดุจูุฉ
```

---

## ๐ ุฃูุงูุฑ ูููุฏุฉ

```bash
# === ุฎุงุฏู ุงูุชุญููู ===
# ุชุดุบูู
docker compose -f docker-compose.analysis.yml up -d

# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
docker compose -f docker-compose.analysis.yml logs -f backend

# ุฅููุงู
docker compose -f docker-compose.analysis.yml down

# ุฅุนุงุฏุฉ ุจูุงุก
docker compose -f docker-compose.analysis.yml up -d --build

# === ุฎุงุฏู ุงูุงุณุชุดุนุงุฑ ===
# ุชุดุบูู
docker compose -f docker-compose.sensor.yml up -d

# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
docker compose -f docker-compose.sensor.yml logs -f

# ุฅููุงู
docker compose -f docker-compose.sensor.yml down

# ูุฑุงูุจุฉ Suricata
tail -f data/suricata/eve.json | jq '.'

# === ูุงุนุฏุฉ ุงูุจูุงูุงุช ===
# ุฏุฎูู PostgreSQL
docker exec -it ai_db-postgres psql -U ai -d ai_db

# ูุณุฎ ุงุญุชูุงุทู
docker exec ai_db-postgres pg_dump -U ai ai_db > backup.sql
```

---

## ๐ฏ ุฃููุงุน ุงููุฌูุงุช ุงูููุชุดูุฉ

### Suricata (ุงูุชูููุนุงุช)
- Port Scans
- SSH Brute Force
- SQL Injection
- XSS Attacks
- DoS/DDoS
- Malware Traffic
- Command Injection

### Network ML (10 ูุฆุงุช)
- BENIGN (ุญุฑูุฉ ุนุงุฏูุฉ)
- Bot
- DDoS
- DoS GoldenEye
- DoS Hulk
- DoS Slowhttptest
- DoS slowloris
- FTP-Patator
- PortScan
- SSH-Patator

### SSH LSTM
- SSH Brute Force
- SSH Anomaly (ุฃููุงุท ุบูุฑ ุนุงุฏูุฉ)
- SSH Suspicious

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ:
1. ุฑุงุฌุน ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุฃุนูุงู
2. ุชุญูู ูู ุณุฌูุงุช Docker
3. ุชุฃูุฏ ูู ุชุทุงุจู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ

---

**Analytical-Intelligence v1.0** - ูุธุงู ai ูุตุบุฑ ูููุดู ุนู ุงูุชูุฏูุฏุงุช ูู ุงูููุช ุงูุญูููู ๐ก๏ธ
